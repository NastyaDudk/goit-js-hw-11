{"version":3,"file":"commonHelpers.js","sources":["../src/project.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst formElem = document.querySelector(\".form\");\nconst galleryEl = document.querySelector(\".gallery-el\");\nconst loaderElem = document.querySelector(\".loader\");\n\nhideLoader();\n\nconst lightbox = new SimpleLightbox(\".gallery a\", {\n  captionDelay: 250,\n});\n\nformElem.addEventListener(\"submit\", onSubmit);\n\nfunction onSubmit(e) {\n  e.preventDefault();\n  showLoader();\n\n  const value = formElem.elements.searchQuery.value;\n  getPhotoBySearch(value)\n    .then((data) => renderImages(data.hits))\n    .catch((error) => renderError(error));\n\n  formElem.reset();\n}\n\nfunction getPhotoBySearch(searchValue) {\n  const BASE_URL = \"https://pixabay.com/api/\";\n  const KEY = \"42153847-0f7baac2d7b2e92d7ce6bbe8e\";\n  const Query = `?key=${KEY}&q=${searchValue}`;\n  const params =\n    \"&image_type=photo&orientation=horizontal&safesearch=true&per_page=20\";\n  const url = BASE_URL + Query + params;\n\n  return fetch(url)\n    .then((res) => res.json())\n    .then((data) => {\n      if (data.total === 0) {\n        throw new Error(\"No images found\");\n      }\n      return data;\n    });\n}\n\nfunction renderImages(array) {\n  const markup = array\n    .map(\n      ({\n        largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `\n      <div class=\"gallery\">\n        <a href=\"${largeImageURL}\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" title=\"${tags}\" width=\"360\" height=\"300\" />\n          <ul class=\"info-cards-container\">\n            <li class=\"info-cards-elements\">likes<span>${likes}</span></li>\n            <li class=\"info-cards-elements\">views<span>${views}</span></li>\n            <li class=\"info-cards-elements\">comments<span>${comments}</span></li>\n            <li class=\"info-cards-elements\">downloads<span>${downloads}</span></li>\n          </ul>\n        </a>\n      </div>\n    `;\n      }\n    )\n    .join(\"\");\n\n  galleryEl.innerHTML = markup;\n  hideLoader();\n  lightbox.refresh();\n}\n\nfunction renderError(error) {\n  galleryEl.innerHTML = \"\";\n  iziToast.show({\n    message: `‚ùå \"${error.message}. Please try again!`,\n    color: \"red\",\n    position: \"topRight\",\n    maxWidth: \"400px\",\n  });\n}\n\nfunction showLoader() {\n  loaderElem.style.display = \"block\";\n}\n\nfunction hideLoader() {\n  loaderElem.style.display = \"none\";\n}\n"],"names":["formElem","galleryEl","loaderElem","hideLoader","lightbox","SimpleLightbox","onSubmit","e","showLoader","value","getPhotoBySearch","data","renderImages","error","renderError","searchValue","BASE_URL","Query","params","url","res","array","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","iziToast"],"mappings":"6vBAKA,MAAMA,EAAW,SAAS,cAAc,OAAO,EACzCC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAa,SAAS,cAAc,SAAS,EAEnDC,IAEA,MAAMC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,GAChB,CAAC,EAEDL,EAAS,iBAAiB,SAAUM,CAAQ,EAE5C,SAASA,EAASC,EAAG,CACnBA,EAAE,eAAc,EAChBC,IAEA,MAAMC,EAAQT,EAAS,SAAS,YAAY,MAC5CU,EAAiBD,CAAK,EACnB,KAAME,GAASC,EAAaD,EAAK,IAAI,CAAC,EACtC,MAAOE,GAAUC,EAAYD,CAAK,CAAC,EAEtCb,EAAS,MAAK,CAChB,CAEA,SAASU,EAAiBK,EAAa,CACrC,MAAMC,EAAW,2BAEXC,EAAQ,6CAAiBF,IACzBG,EACJ,uEACIC,EAAMH,EAAWC,EAAQC,EAE/B,OAAO,MAAMC,CAAG,EACb,KAAMC,GAAQA,EAAI,KAAI,CAAE,EACxB,KAAMT,GAAS,CACd,GAAIA,EAAK,QAAU,EACjB,MAAM,IAAI,MAAM,iBAAiB,EAEnC,OAAOA,CACb,CAAK,CACL,CAEA,SAASC,EAAaS,EAAO,CAC3B,MAAMC,EAASD,EACZ,IACC,CAAC,CACC,cAAAE,EACA,aAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IACe;AAAA;AAAA,mBAEIN;AAAA,sBACGC,WAAsBC,aAAgBA;AAAA;AAAA,yDAEHC;AAAA,yDACAC;AAAA,4DACGC;AAAA,6DACCC;AAAA;AAAA;AAAA;AAAA,KAMxD,EACA,KAAK,EAAE,EAEV5B,EAAU,UAAYqB,EACtBnB,IACAC,EAAS,QAAO,CAClB,CAEA,SAASU,EAAYD,EAAO,CAC1BZ,EAAU,UAAY,GACtB6B,EAAS,KAAK,CACZ,QAAS,MAAMjB,EAAM,6BACrB,MAAO,MACP,SAAU,WACV,SAAU,OACd,CAAG,CACH,CAEA,SAASL,GAAa,CACpBN,EAAW,MAAM,QAAU,OAC7B,CAEA,SAASC,GAAa,CACpBD,EAAW,MAAM,QAAU,MAC7B"}